<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3장. 역할, 책임, 협력 | 기원&#39;s Study(ing)</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-BF2TS7D4KC"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-BF2TS7D4KC');</script>
    <meta name="description" content="기원이의 기술 블로그?">
    
    <link rel="preload" href="/assets/css/0.styles.25cef086.css" as="style"><link rel="preload" href="/assets/js/app.3ba58296.js" as="script"><link rel="preload" href="/assets/js/3.c378513c.js" as="script"><link rel="preload" href="/assets/js/2.347490a7.js" as="script"><link rel="preload" href="/assets/js/83.ce2cd03b.js" as="script"><link rel="prefetch" href="/assets/js/10.4cf78ef5.js"><link rel="prefetch" href="/assets/js/11.7d214be0.js"><link rel="prefetch" href="/assets/js/12.9da9a9a7.js"><link rel="prefetch" href="/assets/js/13.41be446a.js"><link rel="prefetch" href="/assets/js/14.963adfed.js"><link rel="prefetch" href="/assets/js/15.91e40392.js"><link rel="prefetch" href="/assets/js/16.0c455d5b.js"><link rel="prefetch" href="/assets/js/17.552a4266.js"><link rel="prefetch" href="/assets/js/18.a5acfe2e.js"><link rel="prefetch" href="/assets/js/19.4a4fd3d4.js"><link rel="prefetch" href="/assets/js/20.d903cb36.js"><link rel="prefetch" href="/assets/js/21.eb803d33.js"><link rel="prefetch" href="/assets/js/22.02a052b0.js"><link rel="prefetch" href="/assets/js/23.31d6ff52.js"><link rel="prefetch" href="/assets/js/24.c5b7b30c.js"><link rel="prefetch" href="/assets/js/25.f804dd14.js"><link rel="prefetch" href="/assets/js/26.1cd01722.js"><link rel="prefetch" href="/assets/js/27.ff0dcfac.js"><link rel="prefetch" href="/assets/js/28.5e5ed9e3.js"><link rel="prefetch" href="/assets/js/29.bc34527c.js"><link rel="prefetch" href="/assets/js/30.9220ab47.js"><link rel="prefetch" href="/assets/js/31.0b825ebe.js"><link rel="prefetch" href="/assets/js/32.9fa2064b.js"><link rel="prefetch" href="/assets/js/33.45829cea.js"><link rel="prefetch" href="/assets/js/34.56ac5fb4.js"><link rel="prefetch" href="/assets/js/35.6ed393e4.js"><link rel="prefetch" href="/assets/js/36.5077e08d.js"><link rel="prefetch" href="/assets/js/37.c6c321f5.js"><link rel="prefetch" href="/assets/js/38.98225559.js"><link rel="prefetch" href="/assets/js/39.38a434ee.js"><link rel="prefetch" href="/assets/js/4.fd81105d.js"><link rel="prefetch" href="/assets/js/40.1ce2e9d3.js"><link rel="prefetch" href="/assets/js/41.cb41868c.js"><link rel="prefetch" href="/assets/js/42.1e4242d5.js"><link rel="prefetch" href="/assets/js/43.7db2661a.js"><link rel="prefetch" href="/assets/js/44.f177fe25.js"><link rel="prefetch" href="/assets/js/45.927b2638.js"><link rel="prefetch" href="/assets/js/46.9c4c3ef1.js"><link rel="prefetch" href="/assets/js/47.c558fade.js"><link rel="prefetch" href="/assets/js/48.77e2667b.js"><link rel="prefetch" href="/assets/js/49.85aedbe7.js"><link rel="prefetch" href="/assets/js/5.dd4623ec.js"><link rel="prefetch" href="/assets/js/50.ca187a43.js"><link rel="prefetch" href="/assets/js/51.426e8f42.js"><link rel="prefetch" href="/assets/js/52.495f77f7.js"><link rel="prefetch" href="/assets/js/53.342a79f3.js"><link rel="prefetch" href="/assets/js/54.32a6bdad.js"><link rel="prefetch" href="/assets/js/55.aedcc061.js"><link rel="prefetch" href="/assets/js/56.a6b67d2e.js"><link rel="prefetch" href="/assets/js/57.58b18281.js"><link rel="prefetch" href="/assets/js/58.313e5b63.js"><link rel="prefetch" href="/assets/js/59.8924377c.js"><link rel="prefetch" href="/assets/js/6.ca4807a7.js"><link rel="prefetch" href="/assets/js/60.56b44fae.js"><link rel="prefetch" href="/assets/js/61.3c5a1b52.js"><link rel="prefetch" href="/assets/js/62.adedf81e.js"><link rel="prefetch" href="/assets/js/63.5fd244e4.js"><link rel="prefetch" href="/assets/js/64.42e8e021.js"><link rel="prefetch" href="/assets/js/65.e3270c85.js"><link rel="prefetch" href="/assets/js/66.4efabc42.js"><link rel="prefetch" href="/assets/js/67.b367e2e8.js"><link rel="prefetch" href="/assets/js/68.bb4fd433.js"><link rel="prefetch" href="/assets/js/69.3a51a2fa.js"><link rel="prefetch" href="/assets/js/7.d1cfcb34.js"><link rel="prefetch" href="/assets/js/70.51d9f64e.js"><link rel="prefetch" href="/assets/js/71.b530f79c.js"><link rel="prefetch" href="/assets/js/72.af60483d.js"><link rel="prefetch" href="/assets/js/73.0a6214d2.js"><link rel="prefetch" href="/assets/js/74.9c106487.js"><link rel="prefetch" href="/assets/js/75.1be5877c.js"><link rel="prefetch" href="/assets/js/76.67ed39cc.js"><link rel="prefetch" href="/assets/js/77.fa5e71e4.js"><link rel="prefetch" href="/assets/js/78.e1ac294f.js"><link rel="prefetch" href="/assets/js/79.be97ca82.js"><link rel="prefetch" href="/assets/js/8.dac1c635.js"><link rel="prefetch" href="/assets/js/80.3800628d.js"><link rel="prefetch" href="/assets/js/81.728590a2.js"><link rel="prefetch" href="/assets/js/82.19f57371.js"><link rel="prefetch" href="/assets/js/84.c8743e72.js"><link rel="prefetch" href="/assets/js/85.302292b2.js"><link rel="prefetch" href="/assets/js/86.e50dfe71.js"><link rel="prefetch" href="/assets/js/87.4139e641.js"><link rel="prefetch" href="/assets/js/88.63f5e913.js"><link rel="prefetch" href="/assets/js/89.bc26bf74.js"><link rel="prefetch" href="/assets/js/9.40609566.js"><link rel="prefetch" href="/assets/js/90.7a46c539.js"><link rel="prefetch" href="/assets/js/91.cb7fc7ce.js"><link rel="prefetch" href="/assets/js/92.5b2a2d0b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.25cef086.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="parent" class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">기원's Study(ing)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  홈
</a></div><div class="nav-item"><a href="/TIL/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  알고리즘
</a></div><div class="nav-item"><a href="/book/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="/devnote/" class="nav-link">
  개발노트
</a></div><div class="nav-item"><a href="https://github.com/giwonn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  홈
</a></div><div class="nav-item"><a href="/TIL/" class="nav-link">
  TIL
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  알고리즘
</a></div><div class="nav-item"><a href="/book/" class="nav-link router-link-active">
  Book
</a></div><div class="nav-item"><a href="/devnote/" class="nav-link">
  개발노트
</a></div><div class="nav-item"><a href="https://github.com/giwonn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>오브젝트</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/book/오브젝트/01장_객체_설계.html" class="sidebar-link">1장. 객체 설계</a></li><li><a href="/book/오브젝트/02장_객체지향 프로그래밍.html" class="sidebar-link">2장. 객체지향 프로그래밍</a></li><li><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html" class="active sidebar-link">3장. 역할, 책임, 협력</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#영화-예매-시스템-돌아보기" class="sidebar-link">영화 예매 시스템 돌아보기</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#협력" class="sidebar-link">협력</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#협력이-설계를-위한-문맥을-결정한다" class="sidebar-link">협력이 설계를 위한 문맥을 결정한다.</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#책임이란-무엇인가" class="sidebar-link">책임이란 무엇인가</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#책임-할당" class="sidebar-link">책임 할당</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#책임-주도-설계" class="sidebar-link">책임 주도 설계</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#메시지가-객체를-결정한다" class="sidebar-link">메시지가 객체를 결정한다</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#행동이-상태를-결정한다" class="sidebar-link">행동이 상태를 결정한다.</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#역할과-협력" class="sidebar-link">역할과 협력</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#유연하고-재사용-가능한-협력" class="sidebar-link">유연하고 재사용 가능한 협력</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#객체-대-역할" class="sidebar-link">객체 대 역할</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#역할과-추상화" class="sidebar-link">역할과 추상화</a></li><li class="sidebar-sub-header"><a href="/book/오브젝트/03장_ 역할, 책임, 협력.html#배우와-배역" class="sidebar-link">배우와 배역</a></li></ul></li><li><a href="/book/오브젝트/05장_ 책임 할당하기.html" class="sidebar-link">5장. 책임 할당하기</a></li><li><a href="/book/오브젝트/10장_ 상속과 코드 재사용.html" class="sidebar-link">10장. 상속과 코드 재사용</a></li><li><a href="/book/오브젝트/15장_ 디자인 패턴과 프레임워크.html" class="sidebar-link">15장. 디자인 패턴과 프레임워크</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>클린 코드</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3장-역할-책임-협력"><a href="#_3장-역할-책임-협력" class="header-anchor">#</a> 3장. 역할, 책임, 협력</h1> <p>객체지향 패러다임의 관점에서 핵심은 협력, 책임, 역할이다.</p> <p>역할, 책입, 협력이 제자리를 찾지 못한 상태라면 응집도 높은 클래스와 중복 없는 상속 계층을 구현한다고 하더라도 우리가 만든 애플리케이션이 침몰하는 것을 구원하지 못할 것이다. 그 이유를 살펴보자.</p> <h1 id="_1-협력"><a href="#_1-협력" class="header-anchor">#</a> 1. 협력</h1> <h2 id="영화-예매-시스템-돌아보기"><a href="#영화-예매-시스템-돌아보기" class="header-anchor">#</a> 영화 예매 시스템 돌아보기</h2> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-1.png" alt="object-3-1"></p> <p>객체지향 원칙을 따르는 애플리케이션의 제어 흐름은 어떤 하나의 객체에 의해 통제되지 않고 다양한 객체들 사이에 균형 있게 분배되는 것이 일반적이다.</p> <p>여기서 중요한 것은 다양한 객체들이 영화 예매라는 기능을 구현하기 위해 메시지를 주고받으면서 상호작용한다는 점이다.</p> <p>이처럼 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용을 <strong>협력</strong>이라고한다.</p> <p>객체가 협력에 참여하기 위해 수행하는 로직은 <strong>책임</strong>이라고 한다.</p> <p>객체들이 협력에서 수행하는 책임들이 모여 객체가 수행하는 <strong>역할</strong>을 구성한다.</p> <h2 id="협력"><a href="#협력" class="header-anchor">#</a> 협력</h2> <p>협력은 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법이다. 두 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청 할 때 시작된다.</p> <p>**메시지 전송(message sending)**은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다. 객체는 캡슐화로 인해서 다른 객체의 내부 구현에 접근할 수 없기 때문에 오직 메시지 전송을 통해서만 요청을 전달할 수 있다.</p> <p>즉 메시지 전송을 통해 다른 객체에게 위임하여 스스로 처리하게 하여 객체들을 자율적으로 만들어준다. 결과적으로 객체를 자율적으로 만드는 가장 기본적인 방법은 내부 구현을 <strong>캡슐화</strong>하는 것이다.</p> <p>정리하자면, 자율적인 객체는 자신에게 할당된 책임을 수행하던 중에 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 메시지를 전송해서 <strong>협력</strong>을 요청한다.</p> <p>수신받은 객체 역시 직접 처리할 수 없다면 다른 객체에게 도움을 요청한다.</p> <p>이처럼 객체들 사이의 협력을 구성하는 일련의 요청과 응답의 흐름을 통해 애플리케이션의 기능이 구현된다.</p> <h2 id="협력이-설계를-위한-문맥을-결정한다"><a href="#협력이-설계를-위한-문맥을-결정한다" class="header-anchor">#</a> 협력이 설계를 위한 문맥을 결정한다.</h2> <p>애플리케이션 안에 어떤 객체가 필요하다면 그 이유는 단 하나여야한다. 그 객체가 어떤 협력에 참여하고 이기 때문이다. 그리고 그 객체가 협력에 참여할 수 있는 이유는 협력에 필요한 적절한 행동을 보유하고 있기 때문이다.</p> <p>결론적으로 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다. 협력이 바뀌면 객체가 제공해야 하는 행동 역시 바뀌어야 한다. 협력은 객체가 필요한 이유와 객체가 수행하는 행동의 동기를 제공한다. 협력은 객체를 설계하는데 필요한 일종의 **문맥(context)**를 제공한다.</p> <h1 id="_2-책임"><a href="#_2-책임" class="header-anchor">#</a> 2. 책임</h1> <h2 id="책임이란-무엇인가"><a href="#책임이란-무엇인가" class="header-anchor">#</a> 책임이란 무엇인가</h2> <p>협력에 참여하기 위해 객체가 수행하는 행동을 <strong>책임</strong>이라고 한다.</p> <p>책임이란 객체에 의해 정의되는 응집도 있는 행위의 집합으로, 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장이다. 즉, 객체의 책임은 객체가 '무엇을 알고 있는가'와 '무엇을 할 수 있는가'로 구성된다.</p> <ul><li><strong>하는 것</strong> <ol><li>객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것</li> <li>다른 객체의 행동을 시작시키는 것</li> <li>다른 객체의 활동을 제어하고 조절하는 것</li></ol></li> <li><strong>아는 것</strong> <ol><li>사적인 정보에 관해 아는 것</li> <li>관련된 객체에 관해 아는 것</li> <li>자신이 유도하거나 계산할 수 있는 것에 관해 아는 것</li></ol></li></ul> <p>영화 예매 시스템으로 따지면 아래와 같이 나눌 수 있다.</p> <ul><li>Screening
<ul><li>하는 것 : 영화를 예매하는 것</li> <li>아는 것 : 상영할 영화</li></ul></li> <li>Movie
<ul><li>하는 것 : 요금을 계산하는 것</li> <li>아는 것 : 가격, 적용된 할인 정책</li></ul></li></ul> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-2.png" alt="object-3-2"></p> <p>Screening이 reserve 메시지를 수신하고 moive를 인스턴스 변수로 포함하는 이유는 협력 안에서 영화를 예매할 책임을 수행해야 하기 때문이다.</p> <p>여기서 중요한 사실은 책임의 관점에서 '아는 것'과 '하는 것'이 밀접하게 연관돼 있다는 점이다.</p> <p>객체는 자신이 맡은 책임을 수행하는 데 필요한 정보를 알고 있을 책임이 있다. 또한 객체는 자신이 할 수 없는 작업을 도와줄 객체를 알고 있을 책임이 있다. 어떤 책임을 수행하기 위해서는 그 책임을 수행하는 데 필요한 정보도 함께 알아야 할 책임이 있는 것이다.</p> <p>다시 한 번 강조하자면 객체지향 설계에서 가장 중요한 것은 책임이다. 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정한다.</p> <h2 id="책임-할당"><a href="#책임-할당" class="header-anchor">#</a> 책임 할당</h2> <p>자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것이다.</p> <p>이를 책임 할당을 위한 <strong>INFORMATION EXPERT(정보 전문가)</strong> 패턴이라고 부른다.</p> <p>정보 전문가에게 책임을 할당하는 것은 일상 생활에서 도움을 요청하는 방식과도 유사하다.</p> <p>객체들 역시 협력에 필요한 지식과 방법을 가장 잘 알고 있는 객체에게 도움을 요청한다. 요청에 응답하기 위해 필요한 이 행동이 객체가 수행할 책임으로 이어지는 것이다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-3.png" alt="object-3-3"></p> <p>'예매하라'라는 메시지로 협력을 시작한다면, 영화를 예매하는 책임은 Screening에게 할당된다. 하지만 Screening은 예매 가격을 계산하는데 필요한 정보를 충분히 알고 있지 않다. 그래서 다른 객체에게 가격 계산을 요청한다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-4.png" alt="object-3-4"></p> <p>Movie는 가격을 계산할 수 있지만 할인 요금을 계산할 줄은 모른다. 그렇기에 할인 요금을 계산하는 책임을 외부에 전달한다. 이렇게 반복적인 과정을 통해 객체끼리 협력을 하게 된다.</p> <p>또한 잘 보면 이렇게 결정된 메시지가 객체의 퍼블릭 인터페이스를 구성한다.</p> <p>협력을 설계하면서 객체들의 인터페이스와 오퍼레이션을 만들게 되는것이다.</p> <h2 id="책임-주도-설계"><a href="#책임-주도-설계" class="header-anchor">#</a> 책임 주도 설계</h2> <p>어떤 책임을 선택하느냐가 전체적인 설계의 방향과 흐름을 결저한다. 이처럼 책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 **책임 주도 설계(Responsibility-Driven Design, RDD)**라고 부른다.</p> <p>다음은 책임 주도 설계 방법의 과정을 정리한 것이다.</p> <ul><li>시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.</li> <li>시스템 책임을 더 작은 책임으로 분할한다.</li> <li>분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.</li> <li>객체가 책임을 수행하는 도중 다른 객체의 동무이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.</li> <li>해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.</li></ul> <p>협력은 객체를 설계하기 위한 구체먹인 문맥을 제공한다. 구현이 아닌 책임에 집중하는 것이 중요한 이유는 유연하고 견고한 객체지향 시스템을 위해 가장 중요한 재료가 바로 책임이기 때문이다.</p> <h2 id="메시지가-객체를-결정한다"><a href="#메시지가-객체를-결정한다" class="header-anchor">#</a> 메시지가 객체를 결정한다</h2> <p>메시지가 객체를 선택하게 해야 하는 두 가지 중요한 이유가 있다.</p> <ol><li>객체가 **최소한의 인터페이스(minimal interface)**를 가질 수 있게 된다.</li> <li>객체는 충분히 **추상적인 인터페이스(abstract interface)**를 가질 수 있게 된다.</li></ol> <p>협력을 구성하는 객체들의 인터페이스는 충분히 추상적인 동시에 최소한의 크기를 유지할 수 있다. 객체가 충분히 추상적이면서 미니멀리즘을 따르는 인터페이스를 가지게 하고 싶다면 메시지가 객체를 선택하게 하라.</p> <h2 id="행동이-상태를-결정한다"><a href="#행동이-상태를-결정한다" class="header-anchor">#</a> 행동이 상태를 결정한다.</h2> <p>객체는 협력에 필요한 행동을 제공해야 한다. <strong>객체를 객체답게 만드는 것은</strong> 객체의 상태가 아니라 <strong>다른 객체에게 제공하는 행동</strong>이다.</p> <p>객체지향 패러다임에 갓 입문한 사람들이 가장 쉽게 빠지는 실수는 객체의 행동이 아니라 상태에 초점을 맞추는 것이다. 초보자들은 먼저 객체에 필요한 상태가 무엇인지를 결정하고 그 후에 상태에 필요한 행동을 결정한다. 이런 방식은 객체의 내부 구현이 객체의 퍼블릭 인터페이스에 노출되도록 만들기 때문에 캡슐화를 저해한다. 이렇게 객체의 내부 구현에 초점을 맞춘 설계 방법을 데이터-주도 설계(Data-Driven Design)라고 부르기도 했다.</p> <p>협력 관계 속에서 다른 객체에게 무엇을 제공해야 하고 다른 객체로부터 무엇을 얻어야 하는지를 고민해야만 훌륭한 책임을 수확할 수 있다.</p> <p>개별 객체의 상태와 행동이 아닌 시스템의 기능을 구현하기 위한 협력에 초점을 맞춰야만 응집도가 높고 결합도가 낮은 객체들을 창조할 수 있다. 상태는 단지 객체가 행동을 정상적으로 수행하기 위해 필요한 재료일 뿐이다.</p> <p>다시 한번 강조하자면, 객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다.</p> <h1 id="_3-역할"><a href="#_3-역할" class="header-anchor">#</a> 3. 역할</h1> <h2 id="역할과-협력"><a href="#역할과-협력" class="header-anchor">#</a> 역할과 협력</h2> <p>객체는 협력이라는 주어진 문맥 안에서 특정한 목적을 갖게 된다. 객체의 목적은 협력 안에서 객체가 맡게 되는 책임의 집합으로 표시된다. 이처럼 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 <strong>역할</strong>이라고 부른다. 실제로 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는 게 좋다.</p> <p>예를 들어, '예매하라'라는 메시지를 처리하기 위해 Screening을 선택했다.</p> <p>하나의 단계처럼 보이는 이 책임 할당 과정은 실제로는 두 개의 독립적인 단꼐가 합쳐진 것이다.</p> <ol><li>영화를 예매할 수 있는 적절한 역할이 무엇인가를 찾는 것</li> <li>역할을 수행할 객체로 Screening 인스턴스를 찾는 것</li></ol> <p>역할에 특별한 이름을 부여하지는 않았지만 실제로는 익명의 역할을 찾고 그 역할을 수행할 수 있는 객체를 선택하는 방식으로 설계가 진행됐다고 생각하는 것이 자연스럽다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-5.png" alt="object-3-5"></p> <p>Movie 역시 마찬가지다. 역할에 관해 먼저 고민하고 역할을 수행할 객체로 Movie를 선택한 것이다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-6.png" alt="object-3-6"></p> <h2 id="유연하고-재사용-가능한-협력"><a href="#유연하고-재사용-가능한-협력" class="header-anchor">#</a> 유연하고 재사용 가능한 협력</h2> <p>역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문이다.</p> <p>할인에는 비용할인, 비율할인 두가지가 있는데 이 두가지를 역할로 나눈다면 두개의 개별적인 협력이 필요하다.</p> <p>하지만 두 협력을 하나로 통합할 수 있다. 통합한 협력 안에서 두 종류의 객체를 교대로 바꿔 끼울 수 있는 일종의 슬롯이라고도 할 수 있는데 이것이 바로 <strong>역할</strong>이다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-7.png" alt="object-3-7"></p> <p>여기서의 역할이 두 종류의 구체적인 객체를 포괄하는 추상화라는 점에 주목하라. 따라서 역할의 이름으로 DiscountPolicy를 설정하는것은 어떨까?</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-8.png" alt="object-3-8"></p> <p>따라서 역할을 이용하면 불필요한 중복코드를 제거할 수 있다. DiscountPolicy 역할을 수행할 수 있는 어떤 객체라도 이 협력에 참여할 수 있게 됐다. 따라서 책임과 역할을 중심으로 협력을 바라보는 것이 바로 변경과 확장이 용이한 유연한 설계로 나아가는 첫걸음이다.</p> <aside>
💡 역할을 구현하는 가장 일반적인 방법은 **추상 클래스**와 **인터페이스**를 사용하는 것이다.
</aside> <p>역할을 활용한 또 다른 예로 가격을 할인하지 않는 할인 정책인 NoneDiscountPolicy를 들 수 있다. NoneDiscountPolicy 역시 DiscountPolicy 역할을 수행하는 객체의 한 종류다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-9.png" alt="object-3-9"></p> <h2 id="객체-대-역할"><a href="#객체-대-역할" class="header-anchor">#</a> 객체 대 역할</h2> <p>협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다. 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.</p> <p>대부분의 경우에 어떤 것이 역할이고 어떤 것이 객체인지가 또렷하게 드러나지는 않을 것이다.</p> <p>이에 대한 개인적인 견해는 설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야 하고 역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지는 않다는 것이다. 따라서 애매하다면 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가면서 필요한 순간에 객체로부터 역할을 분리해내는 것이 가장 좋은 방법이다.</p> <p>역할은 객체와 클래스에 비해 상대적으로 덜 알려져 있으며 그다지 주목받지 못한 개념인 것이 사실이다. 그럼에도 유연하고 확장 가능하며 일관된 구조를 가지는 시스템을 구축하는 데 역할은 매우 중요하다.</p> <p>중요한 것은 협력을 구체적인 객체가 아니라 추상적인 역할의 관점에서 설계하면 협력이 유연하고 재사용 가능해진다는 것이다. 따라서 역할의 가장 큰 장점은 설계의 구성 요소를 추상화할 수 있다는 것이다.</p> <h2 id="역할과-추상화"><a href="#역할과-추상화" class="header-anchor">#</a> 역할과 추상화</h2> <p>추상화의 첫번 째 장점은 세부 사항에 억눌리지 않고도 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다는 것이다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-10.png" alt="object-3-10"></p> <p>협력이라는 관점에서는 세부적인 사항을 무시하고 추상화에 집중하는 것이 유용하다.</p> <p>따라서 아래와 같이 세부 사항을무시하고 DiscountPolicy와 DiscountCondition만 바라보면 상황을 추상화할 수 있다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-11.png" alt="object-3-11"></p> <p>객체에게 중요한 것은 행동이라는 사실을 기억하라. 역할이 중요한 이유는 동일한 협력을 수행하는 객체들을 추상화할 수 있기 때문이다. 역할을 사용하면 복잡하게 말할 필요가 없다. 간단히 '할인 정책과 여러개의 할인 조건을 적용한다'로 줄여서 표현하면 된다.</p> <p><img src="/images/Book/%EC%98%A4%EB%B8%8C%EC%A0%9D%ED%8A%B8/3%EC%9E%A5/object-3-12.png" alt="object-3-12"></p> <p>추상화의 두 번째 장점은 설계를 유연하게 만들 수 있다는 것이다. 협력 안에서 동일한 책임을 수행하는 객체들은 동일한 역할을 수행하기 때문에 서로 대체 가능하다. 따라서 역할은 다양한 환경에서 다양한 객체들을 수용할 수 있게 해주므로 협력을 유연하게 만든다.</p> <p>이처럼 협력 안에서 역할이라는 추상화를 이용하면 기존 코드를 수정하지 않고도 새로운 행동을 추가할 수 있다. 결과적으로 앞으로 추가될 미지의 할인 정책과 할인 조건을 수용할 수 있는 유연한 설계를 얻을 수 있다. 프레임워크나 디자인 패턴과 같이 재사용 가능한 코드나 설계 아이디어를 구성하는 핵심적인 요소가 바로 역할이다.</p> <h2 id="배우와-배역"><a href="#배우와-배역" class="header-anchor">#</a> 배우와 배역</h2> <p>연극의 배역과 배우 간의 관계에 다음과 같은 특성이 존재한다는 것을 알 수 있다.</p> <ul><li>배역은 연극 배우가 특정 연극에서 연기하는 역할이다.</li> <li>배역은 연극이 상영되는 동안에만 존재하는 일시적인 개념이다.</li> <li>연극이 끝나면 연극 배우는 배역이라는 역할을 벗어 버리고 원래의 연극 배우로 돌아온다.</li></ul> <p>배역과 배우 사이의 또 다른 특성은 동일한 배역을 여러 명의 배우들이 연기할 수 있다는 것이다.</p> <p>위의 사실로부터 연극의 배역과 배우 간에는 다음과 같은 추가적인 특성이 존재한다는 사실을 알 수 있다.</p> <ul><li>서로 다른 배우들이 동일한 배역을 연기할 수 있다.</li> <li>하나의 배우가 다양한 연극 안에서 서로 다른 배역을 연기할 수 있다.</li></ul> <p>연극 안에서 배역을 연기하는 배우라는 은유는 협력 안에서 역할을 수행하는 객체라는 관점이 가진 입체적인 측면들을 훌륭하게 담아낸다. 협력은 연극과 동일하고 코드는 극본과 동일하다.</p> <p>객체는 협력이라는 실행 문맥 안에서 특정한 역할을 수행한다. 객체는 협력이 끝나고 협력에서의 역할을 잊고 원래의 객체로 돌아올 수 있다.</p> <p>협력이라는 문맥 안에서 역할은 특정한 협력에 참여해서 책임을 수행하는 객체의 일부다. 일반적으로 역할은 객체가 협력에 참여하는 잠시 동안에만 존재하는 일시적인 개념이다.</p> <p>따라서 동일한 객체라고 하더라도 객체가 참여하는 협력에 따라 객체의 얼굴은 계속해서 바뀌게 된다. 객체는 다수의 역할을 보유할 수 있지만 객체가 참여하는 특정 협력은 객체의 한 가지 역할만 바라볼 수 있다.</p> <p>객체는 다양한 역할을 가질 수 있다. 객체는 협력에 참여할 때 협력 안에서 하나의 역할로 보여진다. 객체가 다른 협력에 참여할 때는 다른 역할로 보여진다. 협력의 관점에서 특정한 객체의 종류를 캡슐화하기 때문에 동일한 역할을 수행하는 객체들은 서로 대체 가능하다. 역할은 특정한 객체의 종류를 캡슐화하기 때문에 동일한 역할을 수행하고 계약을 준수하는 대체 가능한 객체들은 다형적이다.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/giwonn/giwonn.github.io/edit/master/book/오브젝트/03장_ 역할, 책임, 협력.md" target="_blank" rel="noopener noreferrer">수정</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">최근수정일:</span> <span class="time">2021. 12. 14. 14:45</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/book/오브젝트/02장_객체지향 프로그래밍.html" class="prev">
        2장. 객체지향 프로그래밍
      </a></span> <span class="next"><a href="/book/오브젝트/05장_ 책임 할당하기.html">
        5장. 책임 할당하기
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3ba58296.js" defer></script><script src="/assets/js/3.c378513c.js" defer></script><script src="/assets/js/2.347490a7.js" defer></script><script src="/assets/js/83.ce2cd03b.js" defer></script>
  </body>
</html>
