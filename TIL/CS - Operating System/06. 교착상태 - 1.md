# 교착상태 - 1

## 교착상태(deadlock)
- 2개 이상의 프로세스가 서로 상대방의 작업이 끝나기만을 기다리고 있는 상태
- 결과적으로 아무도 완료되지 못함

### 교착상태의 필요조건
네 가지가 동시에 만족되어야만 교착상태가 발생할 확률이 생김.  
- 상호배제 조건
- 점유 대기 조건
- 비선점 조건
- 환형 대기 조건

### 상호배제 조건
- 프로세스들이 자원에 대한 **배타적인 통제권**을 요구
- 적어도 하나 이상의 자원은 공동 사용될 수 없음
- 즉, 필요로 하는 자원을 다른 프로세스가 점유하고 있으면 반드시 대기해야함!

### 점유 대기 조건
- 프로세스가 자원을 점유하고 있는 상황에서 다른 프로세스가 점유하고 있는 자원이 해제되기를 기다리는 상황

### 비선점 조건
- 프로세스에 할당된 자원은 프로세스가 스스로 반환하기 전에 제거되지 않음
- 즉, 다른 프로세스에 의해 제거되지 않음

### 환형 대기 조건
프로세스의 자원 점유 및 점유된 자원의 요구 관계가 환형(원 모양)을 이루며 대기

<br>

## 자원할당 그래프 `G = (V, E)`

- 정점의 집합 **V** = **P** U **R**
  - P = { P1, P2, ... , Pn } : n개의 프로세스
  - R = { R1, R2, ... , Rm } : m개의 자원

- 방향 있는 간선의 집합 **E** = **Q** U **S**
  - 요구 간선 : 프로세스 Pi가 자원 Rj를 요구함
  - 할당 간선 : 자원 Rj가 프로세스 Pi에 할당됨


## 교착상태와의 관계
- 상호배제 조건 - 할당간선
- 점유 대기 조건 - 할당간선 (+ 요구간선)
- 비선점 조건 - 요구간선
- 환형 대기 조건 - 사이클(cycle)

:::tip
- 자원할당 그래프에 사이클이 없으면? => 교착상태 발생 X  
- 자원할당 그래프에 사이클이 존재하면? => 교착상태가 **발생할 수도 있음**
:::

