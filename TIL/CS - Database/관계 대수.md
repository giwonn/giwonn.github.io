---
sidebarDepth: 2
---

# 관계 대수
- 릴레이션 조작을 위한 대수 연산자
- 관계 대수에서 피연산자는 릴레이션이고, 연산의 결과도 릴레이션임
- **폐쇄 성질 (closure property)**
  - 피연산자와 연산 결과가 모두 같은 데이터 타입이어야함 (관계 대수에서는 피연산자와 연산 결과가 모두 릴레이션임)
  - 중첩(nested)된 수식의 표현이 가능함

### 피연산자의 개수에 따른 연산의 분류
- **Unary operator** : 피연산자가 1개
- **Binary operator** : 피연산자가 2개

:::tip
`-5`는 5를 뺀다고도 볼 수 있고, 음수 5로도 볼 수 있어서 Unary, Binary 둘 다 해당된다.
:::

### 관계 대수의 용도
- 관계 데이터베이스에 대한 질의를 관계 대수식으로 표현함

## 관계 대수의 연산자 (관계 연산자)
1. **집합 연산자**
   - 합집합 (union)
   - 교집합 (intersection)
   - 차집합 (difference)
   - 카티션 프로덕트 (Cartisian Product)
2. **순수 관계 연산자**
   - 셀렉트 (select) : unary operator
   - 프로젝트 (project) : unary operator
   - 조인 (join)
3. **확장된 관계 연산자**
   - 외부 조인 (outer join)
   - 그룹 연산과 통계 연산 : unary operator
   - 작명 연산 : unary operator

## 집합 연산자
### 합집합 (Union, `∪`)
동일한 튜플은 중복 제거하여 하나만 출력된다.  
(**A ∪ B = A + B - A ∩ B**)  
![/images/TIL/CS-Database/관계대수/합집합.png](/images/TIL/CS-Database/관계대수/합집합.png)  

### 차집합 (difference, `-`)
동일한 튜플을 제거해준다.
(**A - B = A - A ∩ B**)  
![/images/TIL/CS-Database/관계대수/차집합.png](/images/TIL/CS-Database/관계대수/차집합.png)  

### 카티션 프로덕트 (Cartesian Product, `×`)
튜플을 곱해준다.  

![/images/TIL/CS-Database/관계대수/카티션-프로덕트.png](/images/TIL/CS-Database/관계대수/카티션-프로덕트.png)  


### 집합 연산자에 사용되는 피연산자의 특징
- **<u>합병 가능(union-compatible)</u>한 릴레이션**
  - ∪, ∩ 연산의 피연산자들은
    1. 차수(degree)가 같아야 함
    2. 대응하는 속성 별로 도메인이 같아야 함
- ∪, ∩, × 연산은 <u>결합적(associative)임</u> (`A∪B∪C = (A∪B)∪C = A∪(B∪C)`)  
- ∪, ∩, × 연산은 <u>교환적(commutiative)임</u> (`A∪B = B∪A`)


## 순수 관계 연산자
### 릴레이션의 수학적 표현 방법
- **릴레이션 R**
  - `R(A₁, A₂, ... , Aｎ)`
  - `R(X), X = {A₁, A₂, ... , Aｎ},` (단 Ai에는 대응하는 도메인 Di가 있음)

### 셀렉트 (Select, `σ`)
- 릴레이션 `R(X)`의 속성 `A`와 `B`에 대해 (`A,B∈X`)  
![/images/TIL/CS-Database/관계대수/튜플-조건식.png](/images/TIL/CS-Database/관계대수/튜플-조건식.png)  
- 결과 : 릴레이션의 <u>수평적 부분집합(horizontal subset)</u> (튜플 조건식을 만족하는 **튜플로 구성된 릴레이션**)
- Unary operator다
- 셀렉트 연산은 교환적(commutiative)임

![/images/TIL/CS-Database/관계대수/튜플-조건식.png](/images/TIL/CS-Database/관계대수/셀렉트.png)  

### 프로젝트 (Project, `π`)
- 릴레이션 `R(X)`에서 `Y⊆X`를 만족하는 속성 집합 `Y`에 대해 
![/images/TIL/CS-Database/관계대수/프로젝트-조건식.png](/images/TIL/CS-Database/관계대수/프로젝트-조건식.png)  
- Y는 <u>타겟 속성 리스트 (target attribute list)</u>
- Unary operator다
- `Z⊆Y`이면, `πz(πy(R)) = πz(R)`
- <u>타겟 리스트에 PK가 포함되면 중복이 발생하지 않음</u>

![/images/TIL/CS-Database/관계대수/프로젝트.png](/images/TIL/CS-Database/관계대수/프로젝트.png)  

### 조인 (Join, `⋈`)
- 카티션 프로덕트에 기반한 연산
- 종류
  - 세타조인 (theta-join)
  - 동일조인 / 등가조인 (equi-join)
  - 자연조인 (natural join)
- <u>일반적으로 조인은 자연조인을 의미함</u>

### 세타조인 (Theta-Join)
![/images/TIL/CS-Database/관계대수/세타조인-조건식.png](/images/TIL/CS-Database/관계대수/세타조인-조건식.png)  
- A와 B는 <u>조인 속성</u>, `AθB`는 <u>조인 조건식</u>

### 동일조인 혹은 등가조인 (Equi-Join)
![/images/TIL/CS-Database/관계대수/동일조인-조건식.png](/images/TIL/CS-Database/관계대수/동일조인-조건식.png)  

![/images/TIL/CS-Database/관계대수/동일조인.png](/images/TIL/CS-Database/관계대수/동일조인.png)  

### 자연조인 (Natural Join, `⋈N`)
![/images/TIL/CS-Database/관계대수/자연조인-조건식.png](/images/TIL/CS-Database/관계대수/자연조인-조건식.png)  
- 동일조인의 결과에서 중복된 속성(컬럼)을 제거함


## 확장된 관계 연산자
### 외부 조인 (Outer Join, `⋈` 혹은 `⟗`)
조인 시, 한 릴레이션에 있는 튜플에 대해 대응하는 릴레이션에서 조인속성값이 같은 튜플이 없을 경우,  
대응하는 튜플의 속성을 모두 `NULL`값으로 만들어 릴레이션 결과에 포함해줌  

- 종류
  - Left (outer) join : 왼쪽 릴레이션의 모든 튜플들이 결과에 포함됨
  - Right (outer) join : 오른쪽 릴레이션의 모든 튜플들이 결과에 포함됨
  - Full (outer) join : 두 릴레이션의 모든 튜플들이 결과에 포함됨

## 그룹 연산과 통계 연산
- **그룹 연산 (group operator)**
  - `GROUP`으로 표현함
  - <u>기준 속성 값이 같은 튜플</u>끼리 그룹핑함
  - 생성되는 그룹의 개수는 연산 실행 전에 알 수 없음
  - 통계 처리를 위한 전처리 작업인 그룹핑을 unary operator로 표현함

- **통계 연산 (statistical operator)**
  - `STAT`으로 표현함
  - 기준 속성 값에 대해 <u>통계치</u>를 계산함 (COUNT, SUM, AVG, MIN, MAX, STDDEV, VARIAN)
  - 주의
    - 기준 속성에 중복값이 있는 튜플도 계산에 포함함
    - 기준 속성에 NULL 값이 들어있는 튜플은 계산에서 제외함
  - 통계 처리 관련 함수를 unary operator로 표현함

- 작명 연산 (RENAME, `ｐ`)
  - 중간 결과 릴레이션에 이름을 붙이거나 그것의 속성 이름을 변경하는 기능
  