# 인메모리 데이터베이스

디스크가 아닌 주 메모리에 모든 데이터를 보유하고 있는 데이터베이스

## 장점
- 디스크 검색보다 자료 접근이 훨씬 빠르다
- 메모리상에 색인(인덱스)를 넣어 빠르게 검색할 수 있다.

## 단점
- 데이터가 휘발성이다. (영속적이지 않다)
- 사용할 수 있는 용량이 RAM의 용량에 좌우된다.

:::tip ACID
데이터의 유효성을 보장하기 위한 트랜잭션의 성질이다.

- **Atomicity(원자성)** : 트랜잭션과 관련된 작업들의 연산결과가 전부 반영되거나 반영되지 말아야 한다.
- **Consistency(일관성)** : 트랜잭션이 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 유지한다.
- **Isolation(독립성)** : 트랜잭션을 수행 시 다른 트랜잭션의 연산 작업이 끼어들지 못하도록 보장한다.
- **Durability(지속성)** : 성공적으로 수행된 트랜잭션은 시스템이 고장나더라도 영구적으로 반영되어야 한다.
:::

:::warning 주의
인메모리 DB는 꼭 Nosql이지 않다.
가장 유명한 Redis가 Nosql이라서 헷갈리는 경우가 많은데 Mysql 또한 인메모리 기능을 지원한다.
:::

## 왜 빠를까?
![메모리 계층구조](/images/TIL/ETC-Database/메모리-계층구조.png)
인메모리 DB가 위치하는 곳은 RAM(주 기억장치)이다.

디스크 기반 저장장치(HDD, SDD)는 **보조 기억 장치**라고 불린다.

외부 디스크의 데이터에 접근하기 위해서는, 데이터를 캐시나 RAM으로 이동시키고나서 접근할 수 있다.

아무래도 데이터를 RAM으로 가져와서 읽어야한다는 점 때문에 느릴 수 밖에 없는데, **인 메모리 DB를 사용하면 데이터를 가져오는 단계를 생략할 수 있다.**

하지만 RAM은 영속적이지 못해서, 인메모리 DB를 사용할 때는 영속적일 필요가 없고 주로 READ하기 위한 데이터만 이용하면 효율이 좋다.


## Register, Cache에서 DB를 사용할 수는 없을까?
이유를 알기 위해서는 일단 레지스터와 캐시에 대해 알아야 한다.

::: tip
- **Register**
컴퓨터에서 제일 빠른 메모리이다.
CPU 내부에 위치해 있으며, 극히 소량의 데이터나 프로세서가 바로 사용할 수 있는 데이터를 담고 있는 영역이다.

- **Cache**
레지스터 다음으로 빠른 메모리이며 CPU 내부에 존재한다.
RAM이 CPU 외부에 위치하기 때문에 속도 차이로 인한 성능 저하를 막기 위해 사용된다.
속도에 따라 L1, L2, L3 캐시 등으로 분류되며, 숫자가 작을수록 용량이 작고 빠르다.
지역성에 의거하여 자주 참조될것 같은 데이터들이 저장된다.
:::

둘 다 CPU 내부에 위치한다.

CPU가 직접 사용하는 공간이기도 하고, 우리가 직접 컨트롤하기 힘들다. 무엇보다 **용량이 작다.**

이러저러한 이유로 RAM에서 DB를 사용한다.