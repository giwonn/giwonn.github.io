(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{416:function(t,e,a){"use strict";a.r(e);var r=a(22),v=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"cookie와-web-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie와-web-storage"}},[t._v("#")]),t._v(" Cookie와 Web Storage")]),t._v(" "),a("h1",{attrs:{id:"cookie란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie란"}},[t._v("#")]),t._v(" Cookie란?")]),t._v(" "),a("p",[t._v("서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각이다."),a("br"),t._v("\n브라우저는 그 데이터 조각들을 저장해 놓았다가, 동일한 서버에 재 요청시에 저장된 데이터를 함께 전송한다.\n쿠키는 두 요청이 동일한 브라우저에서 들어와는지를 판단할 때 주로 사용하는데, 이를 이용하여 로그인 상태를 유지할 수 있다.")]),t._v(" "),a("h2",{attrs:{id:"쿠키를-사용하는-목적"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#쿠키를-사용하는-목적"}},[t._v("#")]),t._v(" 쿠키를 사용하는 목적")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("세션 관리 (Session Management)")]),t._v(" : 서버에 저장해야 할 로그인, 장바구니 등의 정보 관리")]),t._v(" "),a("li",[a("strong",[t._v("개인화 (Personalization)")]),t._v(" : 사용자 선호, 테마 등의 세팅")]),t._v(" "),a("li",[a("strong",[t._v("트래킹 (Tracking)")]),t._v(" : 사용자의 행동을 기록하고 분석하는 용도")])]),t._v(" "),a("p",[t._v("과거엔 클라이언트 측에 정보를 저장할 때 쿠키를 주로 사용하였다."),a("br"),t._v("\n하지만 지금은 "),a("strong",[t._v("Modern Storage APIs")]),t._v("를 사용하여 정보를 저장하는 걸 권장한다고 한다."),a("br"),t._v("\n(모든 요청마다 쿠키가 함께 전송되기 때문에 성능이 떨어지는 원인이 될 수 있기 때문이다.)"),a("br"),t._v(" "),a("br"),t._v("\n정보를 클라이언트 측에 저장하려면 Modern APIs의 한 종류인 "),a("strong",[t._v("웹 스토리지 API (localStorage, sessionStorage)와 IndexDB")]),t._v("를 사용하면 된다.")]),t._v(" "),a("h2",{attrs:{id:"쿠키의-특징"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#쿠키의-특징"}},[t._v("#")]),t._v(" 쿠키의 특징")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("주로 서버에서 사용")]),t._v(" "),a("ul",[a("li",[t._v("Set-Cookie: <cookie-name>=<cookie-value>")])])]),t._v(" "),a("li",[a("strong",[t._v("요청 시 Headers에 실려서 서버로 전송")])]),t._v(" "),a("li",[a("strong",[t._v("만료 기간 지정가능")]),t._v(" "),a("ul",[a("li",[t._v("Set-Cookie: <cookie-name>=<cookie-value>; Expires=<date>")]),t._v(" "),a("li",[t._v("Set-Cookie: <cookie-name>=<cookie-value>; Max-Age=<number>")])])])]),t._v(" "),a("h2",{attrs:{id:"쿠키의-종류"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#쿠키의-종류"}},[t._v("#")]),t._v(" 쿠키의 종류")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("만료기한에 따른 분류")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("영구 쿠키"),a("br"),t._v("(Persistent Cookie)")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("세션 쿠키"),a("br"),t._v("(Session Cookie)")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("만료 기간 O")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("만료 기간 X")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("만료 기간이 끝난 후 삭제")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("브라우저 종료 시 삭제")])])])])]),t._v(" "),a("li",[a("p",[t._v("도메인에 따른 분류")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("퍼스트파티 쿠키"),a("br"),t._v("(First party Cookie)")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("서드파티 쿠키"),a("br"),t._v("(Third party Cookie)")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("같은 도메인"),a("br"),t._v("서브 도메인")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("다른 도메인")])])])])])]),t._v(" "),a("blockquote",[a("p",[t._v("서드파티 쿠키 : 사용자의 방문 사이트 파악 (= 광고)")])]),t._v(" "),a("h2",{attrs:{id:"쿠키의-문제점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#쿠키의-문제점"}},[t._v("#")]),t._v(" 쿠키의 문제점")]),t._v(" "),a("ul",[a("li",[t._v("CSRF : 쿠키가 자동으로 전송된다는 특징을 이용하여 사이트에 로그인이 되어있는 사용자에게 악성 스크립트 실행하게 함 (결제 요청 등)")]),t._v(" "),a("li",[t._v("XSS : 사용자의 민감한 정보 탈취")]),t._v(" "),a("li",[t._v("부족한 저장 용량 (4KB)")]),t._v(" "),a("li",[t._v("HTTP 요청 시 자동으로 모든 쿠키 전송 : 불필요한 트래픽 증가)")])]),t._v(" "),a("hr"),t._v(" "),a("h1",{attrs:{id:"web-storage란"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-storage란"}},[t._v("#")]),t._v(" Web Storage란?")]),t._v(" "),a("p",[t._v("브라우저에서 Key/Value 쌍을 쿠키보다 훨씬 직관적으로 저장할 수 있는 방법을 제공하는 API")]),t._v(" "),a("h2",{attrs:{id:"web-storage의-특징"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-storage의-특징"}},[t._v("#")]),t._v(" Web Storage의 특징")]),t._v(" "),a("ul",[a("li",[t._v("5MB의 저장 용량 (Cookie는 4KB)")]),t._v(" "),a("li",[t._v("요청 시 Headers에 전송하지 않음 (CSRF, 트래픽 문제 해결)")]),t._v(" "),a("li",[t._v("문자열만 저장 가능 (직렬화를 이용하면 객체도 저장 가능)")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}}),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("localStorage")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("sessionStorage")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("저장 범위")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("도메인 / 브라우저")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("도메인 / 브라우저 / 탭")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("삭제 시기")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("직접 삭제 시")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("탭 종료 시")])])])]),t._v(" "),a("h2",{attrs:{id:"사용-시-고려할-점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#사용-시-고려할-점"}},[t._v("#")]),t._v(" 사용 시 고려할 점")]),t._v(" "),a("ul",[a("li",[t._v("객체를 저장하려면 직렬화를 꼭 해줘야 함 (JSON을 이용해줘야함)")]),t._v(" "),a("li",[t._v("브라우저에 따라 지원하지 않을 수도 있음 (ex. 사파리 시크릿모드에서 할당량이 0으로 제한되어 있음)")])]),t._v(" "),a("h2",{attrs:{id:"web-storage의-문제점"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-storage의-문제점"}},[t._v("#")]),t._v(" Web Storage의 문제점")]),t._v(" "),a("ul",[a("li",[t._v("XSS에 취약함")]),t._v(" "),a("li",[t._v("독립된 스토리지 (브라우저 / 탭 간에 데이터 공유 불가)")]),t._v(" "),a("li",[t._v("만료 기간 설정 불가")]),t._v(" "),a("li",[t._v("동기적으로 실행됨\n"),a("ul",[a("li",[t._v("메인 스레드를 블로킹하게 됨")]),t._v(" "),a("li",[t._v("용량이 크다면 IndexedDB를 고려하는것이 좋음")])])])]),t._v(" "),a("hr"),t._v(" "),a("h1",{attrs:{id:"정리"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#정리"}},[t._v("#")]),t._v(" 정리")]),t._v(" "),a("ul",[a("li",[t._v("쿠키나 웹 스토리지 둘 다 보안 문제가 있기 떄문에 민감한 정보는 저장하지 않는 것이 좋다.")])]),t._v(" "),a("h2",{attrs:{id:"사용처"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#사용처"}},[t._v("#")]),t._v(" 사용처")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("종류")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("사용처")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("쿠키")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("n일 동안 보지 않기"),a("br"),t._v("비로그인 장바구니")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("세션 스토리지")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("이전 페이지 저장"),a("br"),t._v("이전 스크롤 위치 저장")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("로컬 스토리지")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("사용자 설정 저장"),a("br"),t._v("글 임시 저장")])])])]),t._v(" "),a("h2",{attrs:{id:"보안-문제-해결-방안"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#보안-문제-해결-방안"}},[t._v("#")]),t._v(" 보안 문제 해결 방안")]),t._v(" "),a("h3",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}}),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("해결 방안")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("이유")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("XSS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("httpOnly 적용")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("자바스크립트로 접근이 불가능하게 됨")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("CSRF")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1. SameSite 적용"),a("br"),t._v("2. Referer 검증")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("2. 같은 도메인의 요청에만 쿠키를 전송하지 않게 됨"),a("br"),t._v("요청 온 사이트의 도메인을 확인할 수 있음")])])])]),t._v(" "),a("h3",{attrs:{id:"web-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-storage"}},[t._v("#")]),t._v(" Web Storage")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}}),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("해결 방안")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("이유")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("XSS")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("innerHTML 사용 X")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("자바스크립트로 코드 삽입을 할 수 없게됨")])])])]),t._v(" "),a("blockquote",[a("p",[a("strong",[t._v("innerHTML을 사용해야 한다면?")]),t._v(" "),a("br"),t._v("XSS 보안 라이브러리(sanitize-html, DOMPurify)를 사용")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"참조"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참조"}},[t._v("#")]),t._v(" 참조")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://developer.mozilla.org/ko/docs/Web/API/Web_Storage_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/ko/docs/Web/API/Web_Storage_API"),a("OutboundLink")],1),a("br"),t._v(" "),a("a",{attrs:{href:"https://www.youtube.com/watch?v=-4ZsGy1LOiE",target:"_blank",rel:"noopener noreferrer"}},[t._v("[10분 테코톡] 🦄 디토의 웹스토리지 & 쿠키"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=v.exports}}]);